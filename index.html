<link rel="stylesheet" href="style.css">
<script src="UnityProgress.js"></script>
<script src="burrito-bison-ll.js"></script>
<script src="kongregate_api.js"></script>
<script>
  var gameInstance = UnityLoader.instantiate("gameContainer", "burrito-bison-ll.json", {
    onProgress: UnityProgress,
    Module: {
      onRuntimeInitialized: function () {
        UnityProgress(gameInstance, "complete")
      }
    }
  });

  function saveGameData() {
    let saveData = JSON.stringify(localStorage);
    let blob = new Blob([saveData], { type: "application/json" });
    let a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "gameSave.json";
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
  }

  function printLocalStorageData() {
    let prettyData = JSON.stringify(localStorage, null, 2);
    console.log(prettyData);

    let blob = new Blob([prettyData], { type: "text/plain" });
    let a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "localStoragePrint.txt";
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
  }

  window.onload = function () {
    let saveButton = document.createElement("button");
    saveButton.innerText = "Save Game";
    saveButton.style.position = "absolute";
    saveButton.style.top = "10px";
    saveButton.style.left = "10px";
    saveButton.onclick = saveGameData;
    document.body.appendChild(saveButton);

    let printButton = document.createElement("button");
    printButton.innerText = "Print Local Storage";
    printButton.style.position = "absolute";
    printButton.style.top = "50px";
    printButton.style.left = "10px";
    printButton.onclick = printLocalStorageData;
    document.body.appendChild(printButton);
  };
</script>

<div class="webgl-content">
  <div id="gameContainer" style="width: 100%; height: 100%; margin: auto"></div>
</div>
